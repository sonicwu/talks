<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Bitcoin and Blockchain</title>
    <meta name="description" content="Bitcoin and Blockchain">
    <meta name="author" content="Sonic Wu">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/league.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Bitcoin and Blockchain</h1>
        </section>
        <section>
          <p><a href="https://www.linkedin.com/in/robin-ye-84a131b4/">Robin Ye</a>:</p>
          <blockquote>
"At this moment, just like in 2000, software development into the Internet age, programmers either continue learning or or be weeded out. Now the Internet age is over, welcome to the age of AI and blockchain."
          </blockquote>
        </section>
        <section>
          <h3>What we are going to talk about?</h3>
          <br/>
          <ul>
            <li>Evolution of Currency</li>
            <li>What is Bitcoin</li>
            <li>History of Bitcoin</li>
            <li>Transactions</li>
            <li>Blockchain</li>
            <li>Mining and Consensus</li>
            <li>User Security Best Practices</li>
          </ul>
        </section>
        <section>
          <h3>What we are not going to talk about?</h3>
          <br/>
          <ul>
            <li>Alternative Coins</li>
            <li>Ethereum</li>
            <li>Elliptic Curves Cryptography</li>
            <li>Digital Signatures (ECDSA)</li>
          </ul>
        </section>
        <section>
          <h2>Evolution of Currency</h2>
        </section>
        <section>
          <h3>Barter Economy</h3>
          <br/>
          <img src="img/barter_economy.png">
        </section>
        <section>
          <h3>Material Currency</h3>
          <img src="img/material_currency.png">
        </section>
        <section>
          <h3>Token Money</h3>
          <img src="img/token_money.png">
        </section>
        <section>
          <h3>Cashless Society</h3>
          <img src="img/cashless_society.png">
        </section>
        <section>
          <h3>What is Bitcoin?</h3>
          <p style="text-align: left">Bitcoin consists of:</p>
          <ul style="font-size: 28px">
            <li>A decentralized P2P network (the bitcoin protocol)</li>
            <li>A public transaction ledger (the blockchain)</li>
            <li>A set of rules for independent transaction validation and currency issuance (consensus rules)</li>
            <li>A mechanism for reaching global decentralized consensus on the valid blockchain (Proof-of-Work algorithm)</li>
          </ul>
        </section>
        <section>
          <h3>History of Bitcoin</h3>
          <br/>
          <ul>
            <li>Bitcoin was invented in 2008 with the publication of a paper titled <a href="https://bitcoin.org/bitcoin.pdf">"Bitcoin: A Peer-to-Peer Electronic Cash System"</a> written under the alias of Satoshi Nakamoto</li>
          </ul>
        </section>
        <section>
          <h3>History of Bitcoin</h3>
          <br/>
          <ul>
            <li>The bitcoin network started in 2009, based on a reference implementation published by Nakamoto and since revised by many other programmers</li>
          </ul>
        </section>
        <section>
          <h3>History of Bitcoin</h3>
          <br/>
          <ul>
            <li>Satoshi Nakamoto withdrew from the public in April 2011, leaving the responsibility of developing the code and network to a thriving group of volunteers</li>
          </ul>
        </section>
        <section>
          <h3>2013 - 2018</h3>
          <img src="img/bitcoin_price_chart.png">
        </section>
        <section>
          <h2>Bitcoin Transaction</h2>
        </section>
        <section>
          <h3>Keys, Addresses, and Wallets</h3>
          <br/>
          <ul>
            <li>Ownership of bitcoin is established through digital keys, bitcoin addresses, and digital signatures</li>
            <li>The digital keys created and stored by users in a file, or simple database, called a wallet</li>
          </ul>
          <img src="img/key_pair_and_addr.png">
        </section>
        <section>
          <h3>Transaction Inputs and Outputs</h3>
          <img src="img/inputs_and_outputs.png">
        </section>
        <section>
          <h3>A chain of transactions</h3>
          <img src="img/chain_of_transcations.png">
        </section>
        <section>
          <h3>Common Transaction Forms</h3>
          <span>
            <img src="img/common_transcation.png">
            <img src="img/aggregationg_transaction.png">
            <img src="img/distributing_transcation.png">
          </span>
        </section>
        <section>
          <h3>The block explorer application</h3>
          <img src="img/sample_transaction.png">
          <p><a href="https://blockchain.info/tx/0627052b6f28912f2703066a912ea577f2ce4da4caa5a5fbd8a57286c345c2f2?show_adv=true">blockchain.info</a></p>
        </section>
        <section>
          <h3>UTXO</h3>
          <br/>
          <ul>
            <li>Unspent Transaction Outputs 未消费交易输出</li>
            <li>最小单位是 Satoshi (0.00000001 BTC)</li>
            <li>交易输入是被消耗的 UTXO，输出是产生的新 UTXO</li>
            <li>比特币世界没有记录用户的余额，只有分散在若干交易中的 UTXO，比特币钱包通过扫描区块链聚合属于用户的所有 UTXO 来计算余额</li>
          </ul>
        </section>
        <section>
          <h3>Transaction Fees</h3>
          <pre><code data-trim contenteditable>
Fees = Sum(Inputs) – Sum(Outputs)
          </code></pre>
          <br/>
          <ul>
            <li>按照交易尺寸，以千字节计算得来，与交易额无关</li>
            <li>是矿工处理交易的优先级因素之一</li>
            <li>钱包会根据网络中最近交易自动计算恰当的交易费</li>
          </ul>
        </section>
        <section>
          <h3>交易费估算</h3>
          <img src="img/fee_estimation_service.png">
          <p><a href="https://bitcoinfees.21.co/">https://bitcoinfees.21.co/</a></p>
        </section>
        <section>
          <h3>锁定和解锁脚本</h3>
          <br/>
          <ul>
            <li>比特币客户端使用一种基于堆栈的，非图灵完备的脚本语言来验证交易</li>
            <li>交易验证依赖于两类脚本: 锁定和解锁脚本</li>
          </ul>
          <img src="img/transcation_script_structure.png">
        </section>
        <section>
          <h3>一次 P2PKH 交易的脚本验证过程</h3>
          <h5>比特币网络中的大多数都是 P2PKH (Pay-to-Public-Key-Hash) 交易</h5>
        </section>
        <section>
          <img src="img/eval_script_for_p2pkh_1.png">
        </section>
        <section>
          <img src="img/eval_script_for_p2pkh_2.png">
        </section>
        <section>
          <h2>Blockchain</h2>
        </section>
        <section>
          <h3>Block and Blockchain</h3>
          <br/>
          <ul>
            <li>区块是一种聚合了交易信息的容器数据结构</li>
            <li>每个区块都会指向一个父区块，形成一个有序链表</li>
            <li>区块链就是比特币世界中的公共账簿</li>
          </ul>
        </section>
        <section>
          <h3>区块结构</h3>
          <br/>
          <table style="font-size: 26px">
            <thead>
            <tr>
              <th>Size</th>
              <th>Field</th>
              <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>4 bytes</td>
              <td>Block Size</td>
              <td>The size of the block, in bytes, following this field</td>
            </tr>
            <tr>
              <td>80 bytes</td>
              <td>Block Header</td>
              <td>Several fields form the block header</td>
            </tr>
            <tr>
              <td>VarInt</td>
              <td>Transaction Counter</td>
              <td>How many transactions follow</td>
            </tr>
            <tr>
              <td>Variable</td>
              <td>Transactions</td>
              <td>The transactions recorded in this block</td>
            </tr>
            </tbody>
          </table>
        </section>
        <section>
          <h3>区块头</h3>
          <br/>
          <table style="font-size: 22px">
            <thead>
            <tr>
              <th>Size</th>
              <th>Field</th>
              <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>4 bytes</td>
              <td>Version</td>
              <td>A version number to track software/protocol upgrades</td>
            </tr>
            <tr>
              <td>32 bytes</td>
              <td>Previous Block Hash</td>
              <td>A reference to the hash of the previous block in the chain</td>
            </tr>
            <tr>
              <td>32 bytes</td>
              <td>Merkle Root</td>
              <td>A hash of the root of the merkle tree of this block’s transactions</td>
            </tr>
            <tr>
              <td>4 bytes</td>
              <td>Timestamp</td>
              <td>The approximate creation time of this block</td>
            </tr>
            <tr>
              <td>4 bytes</td>
              <td>Difficulty</td>
              <td>The Proof-of-Work algorithm difficulty target for this block</td>
            </tr>
            <tr>
              <td>4 bytes</td>
              <td>Nonce</td>
              <td>A counter used for the Proof-of-Work algorithm</td>
            </tr>
            </tbody>
          </table>
        </section>
        <section>
          <h5>区块的连接</h5>
          <img src="img/linking_blocks.png">
        </section>
        <section>
          <h3>创世区块</h3>
          <br/>
          <p style="text-align: left">
            区块链中的第一个区块创建于 2009 年，称为创世区块。创世区块中包含了一个彩蛋，在其 Coinbase 交易中包含这样一句话：“首相第二次对处于崩溃边缘的银行进行紧急救助”，这是当天泰晤士报的头版，也是对现有货币制度的嘲讽
          </p>
        </section>
        <section>
          <h3>Merkle Tree</h3>
          <img src="img/merkle_tree_1.png">
        </section>
        <section>
          <h3>Merkle Tree</h3>
          <p>Even number of nodes</p>
          <img src="img/merkle_tree_2.png">
        </section>
        <section>
          <h3>Merkle Path</h3>
          <img src="img/merkle_tree_path.png">
        </section>
        <section>
          <h3>Merkle Tree 效率</h3>
          <br/>
          <table style="font-size: 30px">
            <thead>
            <tr>
              <th>Number of Txs</th>
              <th>Approx. size of block</th>
              <th>Path size (hashes)</th>
              <th>Path size (bytes)</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>16 txs</td>
              <td>4 KB</td>
              <td>4 hashes</td>
              <td>128 bytes</td>
            </tr>
            <tr>
              <td>512 txs</td>
              <td>128 KB</td>
              <td>9 hashes</td>
              <td>288 bytes</td>
            </tr>
            <tr>
              <td>2048 txs</td>
              <td>512 KB</td>
              <td>11 hashes</td>
              <td>352 bytes</td>
            </tr>
            <tr>
              <td>65535 txs</td>
              <td>16 MB</td>
              <td>16 hashes</td>
              <td>512 bytes</td>
            </tr>
            </tbody>
          </table>
        </section>
        <section>
          <h2>Mining and Consensus</h2>
        </section>
        <section>
          <h3>矿工干什么，收入来自哪里？</h3>
          <br/>
          <p style="text-align: left">矿工验证收到的每笔新交易，并将它们构建在区块中。每成功构建一个新区块并添加到区块链中，矿工将获得创建区块的奖励和区块中所有交易的交易费</p>
        </section>
        <section>
          <h3>比特币经济学与货币创造</h3>
          <br/>
          <p style="text-align: left">比特币网络约每 10 分钟产生一个新区块，每个新区块的诞生会创造一定额度的新比特币（矿工奖励），这是比特币的唯一的发行方式</p>
        </section>
        <section>
          <h4>比特币发行速度和总量</h4>
          <p style="text-align: left">每 210,000 个块（约 4 年），发行速率降低 50%，初始每个区块会产生 50 BTC，而现在 (2017) 已降低到 12.5 BTC。到 2140 年左右，比特币总量将达到 2,100 万，之后新区块将不再奖励比特币，货币发行停止，届时矿工收益仅来自交易费</p>
          <img src="img/bitcoin_money_supply.png">
        </section>
        <section>
          <h3>Coinbase 交易</h3>
          <br/>
          <ul>
            <li>每个区块中的第一笔交易是 Coinbase（创币）交易</li>
            <li>Coinbase 交易没有输入，而输出是当前区块奖励加所有交易费的总和，支付给构建此区块的矿工自己</li>
          </ul>
        </section>
        <section>
          <h3>Proof of Work</h3>
          <br/>
          <p>让我们回忆下区块头中的 Difficulty Target 和 Nonce</p>
          <table style="font-size: 26px">
            <thead>
            <tr>
              <th>Size</th>
              <th>Field</th>
              <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>4 bytes</td>
              <td>Difficulty</td>
              <td>The Proof-of-Work algorithm difficulty target for this block</td>
            </tr>
            <tr>
              <td>4 bytes</td>
              <td>Nonce</td>
              <td>A counter used for the Proof-of-Work algorithm</td>
            </tr>
            </tbody>
          </table>
        </section>
        <section>
          <h3>Proof of Work</h3>
          <br/>
          <pre style="width: 100%"><code data-trim contenteditable>
# example of proof-of-work algorithm
max_nonce = 2 ** 32 # 4 billion

def proof_of_work(header, difficulty_bits):

    difficulty_target = 2 ** (256-difficulty_bits)

    for nonce in xrange(max_nonce):
        block_hash = hashlib.sha256(str(header)+str(nonce)).hexdigest()

        if long(block_hash, 16) < difficulty_target:
            print "Success with nonce %d" % nonce
            return (block_hash, nonce)
          </code></pre>
          <p style="text-align: left">要成功构建一个区块，矿工必须穷举出一个合适的 Nonce，使区块头的哈希值小余难度目标</p>
        </section>
        <section>
          <h3>难度目标与难度调整</h3>
          <br/>
          <ul>
            <li>每 10 分钟产生一个新区块，这是比特币的发行速率和交易达成速度的保证，需要在长期内保持恒定</li>
            <li>每个矿工节点将独立完成难度调整，公式如下</li>
          </ul>
          <pre><code data-trim contenteditable>
New Difficulty = Old Difficulty *
            (Actual Time of Last 2016 Blocks / 20160 minutes)
          </code></pre>
        </section>
        <section>
          <h4>总哈希算力</h4>
          <img src="img/hash_rate.png">
        </section>
        <section>
          <h4>难度目标</h4>
          <img src="img/hash_difficulty.png">
        </section>
        <section>
          <h3>矿工间的竞争</h3>
          <br/>
          <p style="text-align: left">当一位矿工成功构建出区块（解出 Nonce），传播给其它节点时，其它矿工会立刻停止计算，转而投入下一个区块构建的竞争中，一轮竞争的结束也代表着下一轮竞争的开始</p>
        </section>
        <section>
          <h3>去中心化共识</h3>
          <br/>
          <p style="text-align: left">共识来自独立发生在每个网络节点的 4 种过程相互影响</p>
          <ul style="font-size: 28px">
            <li>每个节点依据综合的标准列表对每个交易进行独立验证</li>
            <li>每个节点独立将交易记录打包进新区块，并通过工作量证明算法进行验算</li>
            <li>每个节点独立的对新区块进行校验并组装进区块链</li>
            <li>每个节点对区块链独立选择，在工作量证明机制下选择累计工作量最大的链</li>
          </ul>
        </section>
        <section>
          <h3>区块链分叉</h3>
          <p style="text-align: left">由于区块链是去中心化的，每个节点的视角不是总保持一致，两个节点可能同时传播了经过工作量证明的新区块，试图去延长区块链</p>
          <img src="img/blockchain_with_forks.png">
          <p style="text-align: left">只要所有节点遵循选择最长累计难度链的原则，整个网络最终会收敛到一致的状态</p>
        </section>
        <section>
          <h3>Hard Fork</h3>
          <br/>
          <p>协议、方案的升级，守旧派和革新派</p>
          <ul>
            <li><a href="https://en.wikipedia.org/wiki/Bitcoin_Core">Bitcoin Core</a></li>
            <li><a href="https://en.wikipedia.org/wiki/Bitcoin_XT">Bitcoin XT</a></li>
            <li><a href="https://en.wikipedia.org/wiki/Bitcoin_Classic">Bitcoin Classic</a></li>
            <li><a href="https://en.wikipedia.org/wiki/Bitcoin_Unlimited">Bitcoin Unlimited</a></li>
            <li><a href="https://en.wikipedia.org/wiki/Bitcoin_Cash">Bitcoin Cash</a></li>
          </ul>
        </section>
        <section>
          <h3>51% Consensus Attacks</h3>
          <br/>
          <p>If we controlled a majority (51%) of the total network’s hashing power, we can ...</p>
          <ul>
            <li>Cause deliberate "forks" in the blockchain and double-spend transactions</li>
            <li>Execute DoS attacks against specific transactions or addresses</li>
          </ul>
        </section>
        <section>
          <h4>Is It Too Late to Start Mining?</h4>
        </section>
        <section>
          <h3>GPU Miner</h3>
          <img src="img/gpu_miner.png">
          <p>Nvidia GTX1080 GPU = 2.83GH/s for 200w</p>
        </section>
        <section>
          <p>ASIC: Application-Specific Integrated Circuit</p>
          <img src="img/asic_miner.png">
          <p>AntMiner S2 ASIC = 1000GH/s for 120w</p>
        </section>
        <section>
          <h3>Return On Investment</h3>
          <br/>
          <pre style="text-align: center">ROI = Miner costs / (Income per day - Power costs)</pre>
        </section>
        <section>
          <h5>Your competitors: <a href="http://theweek.com/captured/718731/inside-secret-chinese-bitcoin-mine">Inside a secret Chinese bitcoin mine</a></h5>
          <img src="img/sichuan_miner.png">
          <p>In this highly competitive environment, miners collaborate to form mining pools</p>
        </section>
        <section>
          <h2>User Security Best Practices</h2>
          <br/>
          <ul>
            <li>Physical Bitcoin Storage</li>
            <li>Hardware Wallets</li>
            <li>Balancing Risk</li>
            <li>Diversifying Risk</li>
            <li>Multisig and Governance</li>
            <li>Survivability</li>
          </ul>
        </section>
        <section style="text-align: left">
          <h3>References</h3>
          <ul>
            <li><a href="https://github.com/bitcoinbook/bitcoinbook">Mastering Bitcoin</a></li>
            <li><a href="https://www.coindesk.com/">CoinDesk</a></li>
          </ul>
        </section>
        <section>
          <h1>The End</h1>
          <h4>Q&A</h4>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        Reveal.initialize({
            dependencies: [
                { src: 'plugin/markdown/marked.js' },
                { src: 'plugin/markdown/markdown.js' },
                { src: 'plugin/notes/notes.js', async: true },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
            ]
        });
    </script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-61870469-1', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
